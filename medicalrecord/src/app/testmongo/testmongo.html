<h2>{{ editingId ? 'Modifier un patient' : 'Créer un patient' }}</h2>

<form [formGroup]="patientForm" (ngSubmit)="onSubmit()">
  <div>
    <label>Prénom</label><br />
    <input formControlName="firstname" />
    <div *ngIf="patientForm.get('firstname')?.touched && patientForm.get('firstname')?.invalid">
      Le prénom est obligatoire.
    </div>
  </div>

  <div>
    <label>Nom</label><br />
    <input formControlName="lastname" />
    <div *ngIf="patientForm.get('lastname')?.touched && patientForm.get('lastname')?.invalid">
      Le nom est obligatoire.
    </div>
  </div>

  <div>
    <label>Email</label><br />
    <input formControlName="email" />
    <div *ngIf="patientForm.get('email')?.touched && patientForm.get('email')?.invalid">
      Email invalide.
    </div>
  </div>

  <button type="submit">
    {{ editingId ? 'Mettre à jour' : 'Créer' }}
  </button>

  <button type="button" *ngIf="editingId" (click)="cancelEdit()">
    Annuler
  </button>
</form>

<hr />

<h2>Liste des patients</h2>

<table border="1" cellpadding="4" cellspacing="0">
  <thead>
  <tr>
    <th>Prénom</th>
    <th>Nom</th>
    <th>Email</th>
    <th>Actions</th>
  </tr>
  </thead>
  <tbody>
  <tr *ngFor="let p of patients">
    <td>{{ p.firstname }}</td>
    <td>{{ p.lastname }}</td>
    <td>{{ p.email }}</td>
    <td>
      <button (click)="editPatient(p)">Modifier</button>
      <button (click)="deletePatient(p)">Supprimer</button>
    </td>
  </tr>
  </tbody>
</table>
